# Native RAG runtime config (sample keys)
rag.runtime.openai.api-key=${OPENAI_API_KEY:}
rag.runtime.anthropic.api-key=${ANTHROPIC_API_KEY:}
rag.runtime.azure.api-key=${AZURE_OPENAI_API_KEY:}
rag.runtime.azure.endpoint=${AZURE_OPENAI_ENDPOINT:}
rag.runtime.azure.chat-deployment=gpt-4
rag.runtime.azure.embedding-deployment=text-embedding-3-large

rag.runtime.log-requests=false
rag.runtime.log-responses=false

rag.runtime.vectorstore.backend=postgres
rag.runtime.vectorstore.embedding-dimension=1536
rag.runtime.vectorstore.embedding-model=hash-1536
rag.runtime.vectorstore.embedding-version=v1
# RAG plugin system:
# - enabled IDs CSV (`*` means all discovered plugins)
# - optional execution order override CSV
rag.runtime.rag.plugins.enabled=*
rag.runtime.rag.plugins.order=
# Optional per-tenant overrides (semicolon-separated):
# rag.runtime.rag.plugins.tenant-enabled=tenant-a=normalize-query,safety-filter;tenant-b=*
# rag.runtime.rag.plugins.tenant-order=tenant-a=safety-filter,normalize-query
rag.runtime.rag.plugins.tenant-enabled=
rag.runtime.rag.plugins.tenant-order=
# Built-in plugin tuning
rag.runtime.rag.plugins.normalize-query.lowercase=false
rag.runtime.rag.plugins.normalize-query.max-query-length=4096
rag.runtime.rag.plugins.lexical-rerank.original-weight=0.7
rag.runtime.rag.plugins.lexical-rerank.lexical-weight=0.3
rag.runtime.rag.plugins.lexical-rerank.annotate-metadata=true
rag.runtime.rag.plugins.safety-filter.blocked-terms=
rag.runtime.rag.plugins.safety-filter.mask=[REDACTED]
# Optional NDJSON file path for schema migration history durability.
rag.runtime.embedding.schema.history.path=
# Optional NDJSON file path for retrieval eval run history durability.
rag.runtime.eval.retrieval.history.path=
# Max stored retrieval eval history events in-memory and persistence.
rag.runtime.eval.retrieval.history.max-events=1000
rag.runtime.eval.retrieval.guardrail.enabled=true
rag.runtime.eval.retrieval.guardrail.window-size=20
rag.runtime.eval.retrieval.guardrail.recall-drop-max=0.05
rag.runtime.eval.retrieval.guardrail.mrr-drop-max=0.05
rag.runtime.eval.retrieval.guardrail.latency-p95-increase-max-ms=150
rag.runtime.eval.retrieval.guardrail.latency-avg-increase-max-ms=75
# Scheduled compaction policy for schema migration history.
rag.runtime.embedding.schema.history.compaction.enabled=false
rag.runtime.embedding.schema.history.compaction.interval=24h
rag.runtime.embedding.schema.history.compaction.max-events=200
rag.runtime.embedding.schema.history.compaction.max-age-days=30
rag.runtime.embedding.schema.history.compaction.dry-run=false
# Optional comma-separated tenant IDs. Empty means all tenants with history.
rag.runtime.embedding.schema.history.compaction.tenants=

rag.runtime.vectorstore.postgres.host=localhost
rag.runtime.vectorstore.postgres.port=5432
rag.runtime.vectorstore.postgres.database=gamelan
rag.runtime.vectorstore.postgres.user=postgres
rag.runtime.vectorstore.postgres.password=${DB_PASSWORD:}
rag.runtime.vectorstore.postgres.table=embeddings

rag.runtime.vectorstore.pinecone.api-key=${PINECONE_API_KEY:}
rag.runtime.vectorstore.pinecone.environment=${PINECONE_ENVIRONMENT:}
rag.runtime.vectorstore.pinecone.project-id=${PINECONE_PROJECT_ID:}
rag.runtime.vectorstore.pinecone.index=gamelan

rag.runtime.vectorstore.weaviate.api-key=${WEAVIATE_API_KEY:}
rag.runtime.vectorstore.weaviate.scheme=https
rag.runtime.vectorstore.weaviate.host=weaviate-cluster.weaviate.network
rag.runtime.vectorstore.weaviate.class-name=Document

# SLO thresholds (also configurable via /admin/observability/slo/config)
wayang.rag.slo.compaction-failure-rate=0.10
wayang.rag.slo.compaction-cycle-staleness-ms=172800000
wayang.rag.slo.severity.warning-multiplier=1.0
wayang.rag.slo.severity.critical-multiplier=2.0
# Optional per-metric overrides format: metric=value,metric2=value
wayang.rag.slo.severity.warning-by-metric=
wayang.rag.slo.severity.critical-by-metric=
wayang.rag.slo.alert.enabled=true
# warning|critical
wayang.rag.slo.alert.min-severity=warning
wayang.rag.slo.alert.cooldown-ms=300000

# Embedding module strategy (used by wayang-embedding-core)
wayang.embedding.default-provider=hash
wayang.embedding.default-model=hash-1536
wayang.embedding.normalize=true
# Format: tenant=provider:model;tenant2=provider:model
wayang.embedding.tenant-strategies=tenant-a=tfidf:tfidf-512;tenant-b=chargram:chargram-512

# Admin API key for /admin/embedding/config endpoints
rag.runtime.admin.api-key=${RAG_RUNTIME_ADMIN_API_KEY:}
# Optional secondary key for key rotation windows
rag.runtime.admin.api-key-secondary=${RAG_RUNTIME_ADMIN_API_KEY_SECONDARY:}
# Optional file path for persisting SLO alert snooze state across restarts.
rag.runtime.slo.alert.snooze.path=
