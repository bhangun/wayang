# Wayang Standalone Runtime Configuration
# This configuration file sets up all components for standalone operation

# Quarkus Application Configuration
quarkus.application.name=wayang-standalone
quarkus.application.version=1.0.0

# HTTP Server Configuration
quarkus.http.port=8080
quarkus.http.cors=true
quarkus.http.cors.origins=*
quarkus.http.cors.methods=GET,POST,PUT,DELETE,OPTIONS
quarkus.http.cors.headers=Content-Type,Authorization,X-Requested-With,accept,Origin,Access-Control-Request-Method,Access-Control-Request-Headers

# H2 Database Configuration (Embedded for standalone mode)
quarkus.datasource.db-kind=h2
quarkus.datasource.username=sa
quarkus.datasource.password=
quarkus.datasource.jdbc.url=jdbc:h2:mem:wayangdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
quarkus.datasource.jdbc.driver=org.h2.Driver

# Hibernate Reactive Configuration
quarkus.hibernate-orm.database.generation=drop-and-create
quarkus.hibernate-orm.sql-load-script=import.sql
quarkus.hibernate-orm.log.sql=false
quarkus.hibernate-orm.database.charset=UTF-8
quarkus.hibernate-orm.dialect=org.hibernate.dialect.H2Dialect

# H2 Reactive Datasource (for reactive operations)
quarkus.datasource.reactive.url=vertx-reactive:h2:mem:wayangdb

# Logging Configuration
quarkus.log.level=INFO
quarkus.log.category."tech.kayys".level=DEBUG
quarkus.log.category."io.quarkus".level=WARN
quarkus.log.console.format=%d{HH:mm:ss} %-5p [%c{2.}] (%t) %s%e%n

# Health Checks
quarkus.smallrye-health.root-path=/health
quarkus.smallrye-health.ui.always-expose-details=true

# OpenAPI and Swagger UI
quarkus.swagger-ui.always-include=true
quarkus.smallrye-openapi.path=/openapi

# Metrics
quarkus.micrometer.export.prometheus.enabled=true
quarkus.micrometer.export.prometheus.path=/metrics

# Multitenancy Configuration (disabled by default in standalone mode)
wayang.multitenancy.enabled=false

# Plugin Configuration
wayang.plugins.auto-discovery=true
wayang.plugins.scan-packages=tech.kayys.wayang
wayang.plugins.directory=plugins

# Schema Validation Configuration
wayang.schema.validation.enabled=true
wayang.schema.cache-enabled=true
wayang.schema.cache-size=100

# Embedded State Store Configuration (using in-memory solution for standalone)
# For workflow execution state, we use an embedded solution
wayang.state-store.type=embedded
wayang.state-store.embedded.backend=memory

# Gamelan Orchestration Configuration
gamelan.orchestration.mode=embedded
gamelan.state-management.backend=embedded
gamelan.execution.timeout=300S
gamelan.execution.max-concurrent-runs=10

# Inference Engine Configuration
gollek.inference.local.enabled=true
gollek.inference.default-provider=local
gollek.inference.streaming.enabled=true
gollek.inference.batch-processing.enabled=true

# Model Configuration
gollek.models.default-timeout=60S
gollek.models.max-input-tokens=4096
gollek.models.max-output-tokens=2048

# Vault/Secrets Configuration (embedded for standalone)
wayang.vault.type=embedded
wayang.vault.embedded.location=secrets.dat
wayang.vault.encryption.enabled=false

# Cache Configuration
quarkus.cache.caffeine."schemas".initial-capacity=10
quarkus.cache.caffeine."schemas".maximum-size=100
quarkus.cache.caffeine."schemas".expire-after-write=10M

# Thread Pool Configuration
quarkus.thread-pool.core-threads=8
quarkus.thread-pool.max-threads=200
quarkus.thread-pool.queue-size=1000

# Security Configuration (minimal for standalone)
quarkus.security.users.embedded.enabled=false
quarkus.keycloak.admin.username=admin
quarkus.keycloak.admin.password=admin

# CORS Configuration
quarkus.resteasy.path=/api