{
    "$id": "https://kayys.tech/schema/v1/port-descriptor.schema.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "Port Descriptor",
    "type": "object",
    "required": [
        "name",
        "data"
    ],
    "properties": {
        "name": {
            "type": "string",
            "pattern": "^[a-zA-Z_][a-zA-Z0-9_]*$"
        },
        "displayName": {
            "type": "string"
        },
        "description": {
            "type": "string"
        },
        "data": {
            "type": "object",
            "required": [
                "type"
            ],
            "properties": {
                "type": {
                    "type": "string",
                    "enum": [
                        "json",
                        "string",
                        "markdown",
                        "number",
                        "boolean",
                        "object",
                        "array",
                        "binary",
                        "file_ref",
                        "image",
                        "audio",
                        "video",
                        "embedding",
                        "vector",
                        "llm_completion",
                        "tool_call",
                        "event",
                        "memory_ref",
                        "rag_ref"
                    ]
                },
                "format": {
                    "type": "string",
                    "enum": [
                        "text",
                        "html",
                        "yaml",
                        "base64",
                        "uri",
                        "sse",
                        "stream",
                        "jwt",
                        "sql",
                        "graphql",
                        "protobuf"
                    ]
                },
                "schema": {
                    "description": "JSON Schema or external schema reference",
                    "oneOf": [
                        {
                            "type": "object"
                        },
                        {
                            "type": "string",
                            "format": "uri"
                        }
                    ]
                },
                "multiplicity": {
                    "type": "string",
                    "enum": [
                        "single",
                        "list",
                        "map",
                        "stream"
                    ],
                    "default": "single"
                },
                "source": {
                    "type": "string",
                    "enum": [
                        "input",
                        "context",
                        "rag",
                        "memory",
                        "environment",
                        "secret"
                    ],
                    "default": "input"
                },
                "required": {
                    "type": "boolean",
                    "default": true
                },
                "defaultValue": {},
                "sensitive": {
                    "type": "boolean",
                    "default": false
                }
            }
        }
    }
}